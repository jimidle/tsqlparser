(aaa_translation_unit (batch_statements (statements (sql_statements (use_statement USE (keyw_id (keyw_id_part (func_keyw_id AdventureWorks))) ;))) (statements GO (first_exec (exec_sp (exec_sp_func (keyw_id (keyw_id_part (func_keyw_id (keywords BEGIN)))) (exec_sp_param_list (exec_sp_param (expression (keyw_id_part (func_keyw_id (keywords TRANSACTION)))))))) ;)) (statements GO) (statements (sql_statements (miscellaneous_statements (update_statement UPDATE (update_table (insert_into is_opt_into (keyw_id (keyw_id_part (func_keyw_id Person)) . (keyw_id_part (func_keyw_id Contact)))) (update_set SET (update_set_list (update_element (keyw_id (keyw_id_part (func_keyw_id LastName))) = (expression (functions_and_vars (function (func_name (keyw_id_for_func (keyw_id_orcc (keyw_id_part (func_keyw_id UPPER))))) (function_args ( (param_list_or_all (param_list (param_list_el (expression (keyw_id_part (func_keyw_id LastName)))))) )))))))) (delete_where_clause WHERE (search_condition (predicate (expression (expression (keyw_id_part (func_keyw_id LastName))) = (expression (atoms 'Wood'))))))) ;)))) (statements GO) (statements (sql_statements (miscellaneous_statements (if_statement IF (search_condition (predicate (expression (expression (keyw_id_part (func_keyw_id @@TRANCOUNT))) > (expression (atoms 0))))) (statements (sql_statements (miscellaneous_statements (begin_statement BEGIN (statement_block (statements (sql_statements (miscellaneous_statements (print_statement PRINT (expression (atoms N'A transaction needs to be rolled back.')) ;)))) (statements (sql_statements (miscellaneous_statements (rollbacksave_statement ROLLBACK TRANSACTION ;))))) END))))))))) <EOF>)